apiVersion: edgelake.io/v1alpha1
kind: EdgeLakeOperator
metadata:
  name: edgelake-operator-prod
  namespace: edgelake
spec:
  # Image configuration
  image:
    repository: anylogco/edgelake-network
    tag: "1.3.2500"
    pullPolicy: IfNotPresent

  # Resource allocation for production
  resources:
    limits:
      cpu: "4000m"
      memory: "8Gi"
    requests:
      cpu: "1000m"
      memory: "2Gi"

  # Persistent storage with fast SSD
  persistence:
    enabled: true
    storageClassName: "fast-ssd"
    retainOnDelete: true
    anylog:
      size: "10Gi"
    blockchain:
      size: "2Gi"
    data:
      size: "100Gi"
    scripts:
      size: "1Gi"

  # Node identity
  general:
    nodeName: edgelake-operator-prod
    companyName: "Production Company"
    remoteCli: true

  # Geolocation for monitoring
  geolocation:
    country: "US"
    state: "California"
    city: "San Francisco"

  # Network configuration
  networking:
    serviceType: LoadBalancer
    serverPort: 32148
    restPort: 32149
    tcpThreads: 12
    restThreads: 12

  # PostgreSQL database (reference existing secret)
  database:
    type: psql
    user: edgelake
    passwordSecretRef:
      name: postgres-credentials
      key: password
    host: postgres-service.database.svc.cluster.local
    port: 5432

  # Master node connection
  blockchain:
    ledgerConn: "master-node.edgelake.svc.cluster.local:32048"
    syncTime: "30 second"

  # Operator settings
  operator:
    clusterName: production-cluster
    defaultDbms: production_db
    enableHa: true
    threads: 6
    partitioning:
      enabled: true
      tableName: "*"
      interval: "7 days"
      keep: 4
      sync: "1 day"

  # Advanced settings
  advanced:
    queryPool: 12
    thresholdTime: "30 seconds"
    thresholdVolume: "500KB"
